<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Modifier la tâche</title>
</head>
<body>
  <h1>Modifier la tâche</h1>

  

  <form action="{{ route('tasks.update', { id: task.id }) }}" method="POST">
    {{ csrfField() }}

    <div style="margin-bottom: 15px;">
      <label for="titre">Titre :</label><br>
      <input type="text" name="titre" id="titre" value="{{ task.titre }}" required style="width: 300px;">
    </div>

    <div style="margin-bottom: 15px;">
      <label for="description">Description :</label><br>
      <textarea name="description" id="description" rows="4" required style="width: 300px;">{{ task.description }}</textarea>
    </div>

    <div style="margin-bottom: 15px;">
      <label for="statut">Statut :</label><br>
      <select name="statut" id="statut" required>
        <option value="à faire" {{ task.statut === 'à faire' ? 'selected' : '' }}>À faire</option>
        <option value="en cours" {{ task.statut === 'en cours' ? 'selected' : '' }}>En cours</option>
        <option value="terminée" {{ task.statut === 'terminée' ? 'selected' : '' }}>Terminée</option>
      </select>
    </div>

    <div style="margin-bottom: 15px;">
      <label>Collaborateurs :</label><br>
      <div style="border: 1px solid #ddd; padding: 10px; max-height: 200px; overflow-y: auto; width: 300px;">
        @each(u in users)
          @if(u.id !== user.id)
            <label style="display: block; margin-bottom: 5px;">
              <input
                type="checkbox"
                name="collaborators[]"
                value="{{ u.id }}"
                {{ task.collaborators.some(c => c.id === u.id) ? 'checked' : '' }}
              >
              {{ u.nom }} ({{ u.email }})
            </label>
          @end
        @end
      </div>
      <small style="color: #666;">Sélectionnez les utilisateurs qui collaboreront sur cette tâche</small>
    </div>

    <button type="submit" style="padding: 8px 16px; background: #4CAF50; color: white; border: none; cursor: pointer;">
      Mettre à jour
    </button>
  </form>

  <br>
  <a href="{{ route('tasks.index') }}">← Retour à la liste</a>
</body>
</html>
